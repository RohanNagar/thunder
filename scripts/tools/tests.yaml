# Test cases are executed in the order they are defined

create:
  - name: CREATE NULL USER
    log: 'Checking for BAD REQUEST when creating a null user...'
    body: null
    expectedCode: 400
    expectedResponse: 'Cannot post a null user.'

  - name: CREATE NULL EMAIL
    disabled: true
    log: 'Checking for BAD REQUEST when creating a user with a null email...'
    body:
      email:
        address: null
      password: test
      properties:
    expectedCode: 400
    expectedResponse: 'Cannot post a user without an email address.'

  - name: CREATE INVALID EMAIL
    log: 'Checking for BAD REQUEST when creating a user with an invalid email...'
    body:
      email:
        address: invalidEmail
      password: test
      properties:
    expectedCode: 400
    expectedResponse: 'Invalid email address format. Please try again.'

  - name: CREATE INVALID PROPERTIES
    log: 'Checking for BAD REQUEST when creating a user with invalid properties...'
    body:
      email:
        address: test@test.com
      password: test
      properties:
    expectedCode: 400
    expectedResponse: 'Cannot post a user with invalid properties.'

  - name: CREATE
    log: 'Attempting to create a new user...'
    body:
      email:
        address: success@simulator.amazonses.com
      password: 5f4dcc3b5aa765d61d8327deb882cf99
      properties:
        uniqueID: ABC123
        attributes:
          - hello
          - world
    expectedCode: 201
    expectedResponse:
      email:
        address: success@simulator.amazonses.com
        verified: false
        verificationToken: null
      password: 5f4dcc3b5aa765d61d8327deb882cf99
      properties:
        uniqueID: ABC123
        attributes:
          - hello
          - world

  - name: CREATE DUPLICATE USER
    log: 'Checking for CONFLICT when creating a duplicate user...'
    body:
      email:
        address: success@simulator.amazonses.com
      password: 5f4dcc3b5aa765d61d8327deb882cf99
      properties:
        uniqueID: ABC123
        attributes:
          - hello
          - world
    expectedCode: 409
    expectedResponse: 'User success@simulator.amazonses.com already exists in the database.'

get:
  - name: GET NULL EMAIL
    log: 'Checking for BAD REQUEST when getting a user using a null email...'
    email: null
    password: 5f4dcc3b5aa765d61d8327deb882cf99
    expectedCode: 400
    expectedResponse: 'Incorrect or missing email query parameter.'

  - name: GET EMPTY EMAIL
    log: 'Checking for BAD REQUEST when getting a user using an empty email...'
    email: ''
    password: 5f4dcc3b5aa765d61d8327deb882cf99
    expectedCode: 400
    expectedResponse: 'Incorrect or missing email query parameter.'

  - name: GET NULL PASSWORD
    disabled: true
    log: 'Checking for BAD REQUEST when getting a user using a null password...'
    email: success@simulator.amazonses.com
    password: null
    expectedCode: 400
    expectedResponse: 'Incorrect or missing header credentials.'

  - name: GET EMPTY PASSWORD
    log: 'Checking for BAD REQUEST when getting a user using an empty password...'
    email: success@simulator.amazonses.com
    password: ''
    expectedCode: 400
    expectedResponse: 'Incorrect or missing header credentials.'

  - name: GET NONEXISTANT USER
    log: 'Checking for NOT FOUND when getting a nonexistant user...'
    email: test@test.com
    password: password
    expectedCode: 404
    expectedResponse: 'User test@test.com not found in the database.'

  - name: GET INCORRECT PASSWORD
    log: 'Checking for UNAUTHORIZED when getting a user using an incorrect password...'
    email: success@simulator.amazonses.com
    password: incorrectPassword
    expectedCode: 401
    expectedResponse: 'Unable to validate user with provided credentials.'

  - name: GET
    log: 'Attempting to get the user...'
    email: success@simulator.amazonses.com
    password: 5f4dcc3b5aa765d61d8327deb882cf99
    expectedCode: 200
    expectedResponse:
      email:
        address: success@simulator.amazonses.com
        verified: false
        verificationToken: null
      password: 5f4dcc3b5aa765d61d8327deb882cf99
      properties:
        uniqueID: ABC123
        attributes:
          - hello
          - world

email:
  - name: EMAIL NULL EMAIL
    log: 'Checking for BAD REQUEST when sending a verification email to a null email...'
    email: null
    password: 5f4dcc3b5aa765d61d8327deb882cf99
    expectedCode: 400
    expectedResponse: 'Incorrect or missing email query parameter.'